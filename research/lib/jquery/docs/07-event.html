<!DOCTYPE html>  <html> <head>   <title>07-event.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="01-core.html">                 01-core.js               </a>                                           <a class="source" href="02-deferred.html">                 02-deferred.js               </a>                                           <a class="source" href="03-support.html">                 03-support.js               </a>                                           <a class="source" href="04-data.html">                 04-data.js               </a>                                           <a class="source" href="05-queue.html">                 05-queue.js               </a>                                           <a class="source" href="06-attributes.html">                 06-attributes.js               </a>                                           <a class="source" href="07-event.html">                 07-event.js               </a>                                           <a class="source" href="08-selector.html">                 08-selector.js               </a>                                           <a class="source" href="09-traversing.html">                 09-traversing.js               </a>                                           <a class="source" href="10-manipulation.html">                 10-manipulation.js               </a>                                           <a class="source" href="11-css.html">                 11-css.js               </a>                                           <a class="source" href="12-ajax.html">                 12-ajax.js               </a>                                           <a class="source" href="13-effects.html">                 13-effects.js               </a>                                           <a class="source" href="14-offset.html">                 14-offset.js               </a>                                           <a class="source" href="15-dimensions.html">                 15-dimensions.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               07-event.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><strong>jQuery Annotated Source</strong>.</p>

<p><a href="/jquery-annotated-source/">Home</a> | <a href="06-attributes.html">Previous Chapter</a> | <a href="08-selector.html">Next Chapter</a></p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Events</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">rnamespaces</span> <span class="o">=</span> <span class="sr">/\.(.*)$/</span><span class="p">,</span>
  <span class="nx">rformElems</span> <span class="o">=</span> <span class="sr">/^(?:textarea|input|select)$/i</span><span class="p">,</span>
  <span class="nx">rperiod</span> <span class="o">=</span> <span class="sr">/\./g</span><span class="p">,</span>
  <span class="nx">rspaces</span> <span class="o">=</span> <span class="sr">/ /g</span><span class="p">,</span>
  <span class="nx">rescape</span> <span class="o">=</span> <span class="sr">/[^\w\s.|`]/g</span><span class="p">,</span>
  <span class="nx">fcleanup</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">nm</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">nm</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rescape</span><span class="p">,</span> <span class="s2">&quot;\\$&amp;&quot;</span><span class="p">);</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>A number of helper functions used for managing events.
 Many of the ideas behind this code originated from
 Dean Edwards' addEvent library.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Bind an event to an element
Original by Dean Edwards</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">handler</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="nx">returnFalse</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handler</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Fixes bug #7229. Fix recommended by jdalton</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">handleObjIn</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">handler</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handleObjIn</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">;</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="nx">handleObjIn</span><span class="p">.</span><span class="nx">handler</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Make sure that the function being executed has a unique ID</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Init the element's event structure</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">elemData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>If no elemData is found then we must be trying to bind to one of the
banned noData elements</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elemData</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span><span class="p">,</span>
      <span class="nx">eventHandle</span> <span class="o">=</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="nx">events</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span> <span class="o">=</span> <span class="nx">eventHandle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Discard the second event of a jQuery.event.trigger() and
when an event is called after a page has unloaded</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">return</span> <span class="k">typeof</span> <span class="nx">jQuery</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">e</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="o">!==</span> <span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="o">?</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">eventHandle</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="o">:</span>
          <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Add elem as a property of the handle function
This is to prevent a memory leak with non-native events in IE.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">eventHandle</span><span class="p">.</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Handle multiple events separated by a space
jQuery(...).bind("mouseover mouseout", fn);</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">types</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">handleObjIn</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">handleObjIn</span><span class="p">)</span> <span class="o">:</span>
        <span class="p">{</span> <span class="nx">handler</span><span class="o">:</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span> <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Namespaced event handlers</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">namespaces</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">sort</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">namespaces</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">handleObj</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span><span class="p">;</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Get the current list of functions bound to this event</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="kd">var</span> <span class="nx">handlers</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">],</span>
        <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Init the event handler queue</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handlers</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handlers</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[];</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Check for a special event handler
Only use addEventListener/attachEvent if the special
events handler returns false</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">setup</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Bind the global event handler to the element</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">eventHandle</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">.</span><span class="nx">add</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">special</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">handleObj</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Add the function to the element's handler list</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">handlers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">handleObj</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Keep track of which events have been used, for event optimization</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">global</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Nullify elem to prevent memory leaks in IE</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">elem</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">global</span><span class="o">:</span> <span class="p">{},</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Detach an event or set of events from an element</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">pos</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>don't do events on text and comment nodes</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">handler</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="nx">returnFalse</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">all</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">namespace</span><span class="p">,</span> <span class="nx">special</span><span class="p">,</span> <span class="nx">eventType</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="nx">origType</span><span class="p">,</span>
      <span class="nx">elemData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">hasData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">),</span>
      <span class="nx">events</span> <span class="o">=</span> <span class="nx">elemData</span> <span class="o">&amp;&amp;</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elemData</span> <span class="o">||</span> <span class="o">!</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>types is actually an event object here</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">types</span> <span class="o">&amp;&amp;</span> <span class="nx">types</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">handler</span><span class="p">;</span>
      <span class="nx">types</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Unbind all events for the element</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">types</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">types</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">types</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;.&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">types</span> <span class="o">=</span> <span class="nx">types</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="nx">types</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Handle multiple events separated by a space
jQuery(...).unbind("mouseover mouseout", fn);</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">types</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">origType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nx">handleObj</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="nx">all</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">namespaces</span> <span class="o">=</span> <span class="p">[];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">all</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Namespaced event handlers</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">namespaces</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>

        <span class="nx">namespace</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(^|\\.)&quot;</span> <span class="o">+</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">sort</span><span class="p">(),</span> <span class="nx">fcleanup</span> <span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\.(?:.*\\.)?&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(\\.|$)&quot;</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">eventType</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">eventType</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handler</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">eventType</span><span class="p">[</span> <span class="nx">j</span> <span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">all</span> <span class="o">||</span> <span class="nx">namespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">origType</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">,</span> <span class="nx">j</span> <span class="p">);</span>
            <span class="nx">eventType</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">j</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">pos</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">eventType</span><span class="p">[</span> <span class="nx">j</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">===</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>remove the given handler for the given type</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span> <span class="nx">all</span> <span class="o">||</span> <span class="nx">namespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">pos</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">eventType</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">j</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">.</span><span class="nx">remove</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">special</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">handleObj</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">pos</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>remove generic event handler if no more handlers exist</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span> <span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">pos</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">teardown</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">teardown</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">namespaces</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">ret</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">delete</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Remove the expando if it's no longer used</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handle</span><span class="p">.</span><span class="nx">elem</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">delete</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span>
      <span class="k">delete</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">elemData</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  </pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Events that are safe to short-circuit if no handlers are attached.
Native DOM events should not be added, they may have inline handlers.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">customEvent</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;getData&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;setData&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;changeData&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>

  <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">onlyHandlers</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Event object or event type</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">event</span><span class="p">,</span>
      <span class="nx">namespaces</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">exclusive</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;!&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Exclusive events trigger only for the exact event (no namespaces)</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
      <span class="nx">exclusive</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Namespaced trigger; create a regexp to match event type in handle()</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">namespaces</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">namespaces</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">customEvent</span><span class="p">[</span> <span class="nx">type</span> <span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">global</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>No jQuery handlers for this event type, and it can't have inline handlers</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Caller can pass in an Event, Object, or just an event type string</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">event</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">event</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">?</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>jQuery.Event object</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">event</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">?</span> <span class="nx">event</span> <span class="o">:</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Object literal</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">event</span> <span class="p">)</span> <span class="o">:</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Just the event type (string)</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">type</span> <span class="p">);</span>

    <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">exclusive</span> <span class="o">=</span> <span class="nx">exclusive</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">namespace_re</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(^|\\.)&quot;</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\.(?:.*\\.)?&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(\\.|$)&quot;</span><span class="p">);</span>
    </pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>triggerHandler() and global events don't bubble or run the default action</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">onlyHandlers</span> <span class="o">||</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Handle a global trigger</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>TODO: Stop taunting the data cache; remove global events and always attach to document</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>internalKey variable is just used to make it easier to find
and potentially change this stuff later; currently it just
points to jQuery.expando</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">internalKey</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span>
          <span class="nx">internalCache</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">internalCache</span> <span class="o">&amp;&amp;</span> <span class="nx">internalCache</span><span class="p">.</span><span class="nx">events</span> <span class="o">&amp;&amp;</span> <span class="nx">internalCache</span><span class="p">.</span><span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">internalCache</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Don't do events on text and comment nodes</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Clean up the event in case it is being reused</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">event</span><span class="p">.</span><span class="nx">result</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Clone any incoming data and prepend the event, creating the handler arg list</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">:</span> <span class="p">[];</span>
    <span class="nx">data</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">event</span> <span class="p">);</span>

    <span class="kd">var</span> <span class="nx">cur</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>IE doesn't like method names with a colon (#3533, #8272)</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">ontype</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Fire event on the current element, then bubble up the DOM tree</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">do</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="s2">&quot;handle&quot;</span> <span class="p">);</span>

      <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>Trigger an inline bound script</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span> <span class="nx">ontype</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">].</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">result</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Bubble up to document, then to window</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">||</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">cur</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isPropagationStopped</span><span class="p">()</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <p>If nobody prevented the default action, do it now</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isDefaultPrevented</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">old</span><span class="p">,</span>
        <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>

      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">_default</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">_default</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span> <span class="nx">event</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;click&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span> <span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p>Call a native DOM method on the target with the same name name as the event.
Can't use an .isFunction)() check here because IE6/7 fails that test.
IE&lt;9 dies on focus to hidden element (#1486), may want to revisit a try/catch.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">try</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">ontype</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <p>Don't re-trigger an onFOO event when we call its FOO() method</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">old</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">];</span>

            <span class="k">if</span> <span class="p">(</span> <span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]();</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">ieError</span> <span class="p">)</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">old</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">handle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">event</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fix</span><span class="p">(</span> <span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>Snapshot the handlers list since a called handler may add/remove events.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">handlers</span> <span class="o">=</span> <span class="p">((</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="p">{})[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
      <span class="nx">run_all</span> <span class="o">=</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">exclusive</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
      <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <p>Use the fix-ed Event rather than the (read-only) native event</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">handlers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">handlers</span><span class="p">[</span> <span class="nx">j</span> <span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <p>Triggered event must 1) be non-exclusive and have no namespace, or
2) have namespace(s) a subset or equal to those in the bound event.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span> <span class="nx">run_all</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">namespace_re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-55">&#182;</a>               </div>               <p>Pass in a reference to the handler function itself
So that we can later remove it</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">event</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">;</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">event</span><span class="p">.</span><span class="nx">result</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isImmediatePropagationStopped</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">props</span><span class="o">:</span> <span class="s2">&quot;altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span>

  <span class="nx">fix</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-56">&#182;</a>               </div>               <p>store a copy of the original event object
and "clone" to set read-only properties</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">originalEvent</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
    <span class="nx">event</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">originalEvent</span> <span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">prop</span><span class="p">;</span> <span class="nx">i</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">prop</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">[</span> <span class="o">--</span><span class="nx">i</span> <span class="p">];</span>
      <span class="nx">event</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">originalEvent</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">];</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-57">&#182;</a>               </div>               <p>Fix target property, if necessary</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-58">&#182;</a>               </div>               <p>Fixes #1925 where srcElement might not be defined either</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">srcElement</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-59">&#182;</a>               </div>               <p>check if target is a textnode (safari)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-60">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-60">&#182;</a>               </div>               <p>Add relatedTarget, if necessary</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">fromElement</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">fromElement</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">?</span> <span class="nx">event</span><span class="p">.</span><span class="nx">toElement</span> <span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">fromElement</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-61">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-61">&#182;</a>               </div>               <p>Calculate pageX/Y if missing and clientX/Y available</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">eventDocument</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span><span class="p">,</span>
        <span class="nx">doc</span> <span class="o">=</span> <span class="nx">eventDocument</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span>
        <span class="nx">body</span> <span class="o">=</span> <span class="nx">eventDocument</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>

      <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="p">(</span><span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="p">(</span><span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollTop</span>  <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span>  <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-62">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-62">&#182;</a>               </div>               <p>Add which for key events</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">event</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-63">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-63">&#182;</a>               </div>               <p>Add metaKey to non-Mac browsers (use ctrl for PC's and Meta for Macs)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-64">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-64">&#182;</a>               </div>               <p>Add which for click: 1 === left; 2 === middle; 3 === right
Note: button is not normalized, so don't use it</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">2</span> <span class="o">?</span> <span class="mi">3</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">4</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">));</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>
  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-65">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-65">&#182;</a>               </div>               <p>Deprecated, use jQuery.guid instead</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">guid</span><span class="o">:</span> <span class="mi">1</span><span class="nx">E8</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-66">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-66">&#182;</a>               </div>               <p>Deprecated, use jQuery.proxy instead</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">proxy</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">proxy</span><span class="p">,</span>

  <span class="nx">special</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">ready</span><span class="o">:</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-67">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-67">&#182;</a>               </div>               <p>Make sure the ready event is setup</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">setup</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">bindReady</span><span class="p">,</span>
      <span class="nx">teardown</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noop</span>
    <span class="p">},</span>

    <span class="nx">live</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">handleObj</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span>
          <span class="nx">liveConvert</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">),</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="p">{</span><span class="nx">handler</span><span class="o">:</span> <span class="nx">liveHandler</span><span class="p">,</span> <span class="nx">guid</span><span class="o">:</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span><span class="p">})</span> <span class="p">);</span>
      <span class="p">},</span>

      <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">handleObj</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">liveConvert</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">),</span> <span class="nx">handleObj</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">beforeunload</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-68">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-68">&#182;</a>               </div>               <p>We only want to do this special case on windows</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">onbeforeunload</span> <span class="o">=</span> <span class="nx">eventHandle</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">},</span>

      <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">onbeforeunload</span> <span class="o">===</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">onbeforeunload</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="o">?</span>
  <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="o">:</span>
  <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">detachEvent</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-69">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-69">&#182;</a>               </div>               <p>Allow instantiation without the 'new' keyword</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">props</span> <span class="p">);</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-70">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-70">&#182;</a>               </div>               <p>Event object</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">src</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-71">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-71">&#182;</a>               </div>               <p>Events bubbling up the document may have been marked as prevented
by a handler lower down the tree; reflect the correct value.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">this</span><span class="p">.</span><span class="nx">isDefaultPrevented</span> <span class="o">=</span> <span class="p">(</span><span class="nx">src</span><span class="p">.</span><span class="nx">defaultPrevented</span> <span class="o">||</span> <span class="nx">src</span><span class="p">.</span><span class="nx">returnValue</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span>
      <span class="nx">src</span><span class="p">.</span><span class="nx">getPreventDefault</span> <span class="o">&amp;&amp;</span> <span class="nx">src</span><span class="p">.</span><span class="nx">getPreventDefault</span><span class="p">())</span> <span class="o">?</span> <span class="nx">returnTrue</span> <span class="o">:</span> <span class="nx">returnFalse</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-72">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-72">&#182;</a>               </div>               <p>Event type</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-73">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-73">&#182;</a>               </div>               <p>Put explicitly provided properties onto the event object</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">props</span> <span class="p">);</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-74">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-74">&#182;</a>               </div>               <p>timeStamp is buggy for some events on Firefox(#3843)
So we won't rely on the native value</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">timeStamp</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-75">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-75">&#182;</a>               </div>               <p>Mark it as fixed</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">returnFalse</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">returnTrue</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-76">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-76">&#182;</a>               </div>               <p>jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">preventDefault</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isDefaultPrevented</span> <span class="o">=</span> <span class="nx">returnTrue</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-77">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-77">&#182;</a>               </div>               <p>if preventDefault exists run it on the original event</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-78">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-78">&#182;</a>               </div>               <p>otherwise set the returnValue property of the original event to false (IE)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">returnValue</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">stopPropagation</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isPropagationStopped</span> <span class="o">=</span> <span class="nx">returnTrue</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-79">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-79">&#182;</a>               </div>               <p>if stopPropagation exists run it on the original event</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-80">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-80">&#182;</a>               </div>               <p>otherwise set the cancelBubble property of the original event to true (IE)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">e</span><span class="p">.</span><span class="nx">cancelBubble</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">stopImmediatePropagation</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isImmediatePropagationStopped</span> <span class="o">=</span> <span class="nx">returnTrue</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">isDefaultPrevented</span><span class="o">:</span> <span class="nx">returnFalse</span><span class="p">,</span>
  <span class="nx">isPropagationStopped</span><span class="o">:</span> <span class="nx">returnFalse</span><span class="p">,</span>
  <span class="nx">isImmediatePropagationStopped</span><span class="o">:</span> <span class="nx">returnFalse</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-81">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-81">&#182;</a>               </div>               <p>Checks if an event happened on an element within another element
Used in jQuery.event.special.mouseenter and mouseleave handlers</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">withinElement</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-82">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-82">&#182;</a>               </div>               <p>Check if mouse(over|out) are still within the same parent element</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">related</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span><span class="p">,</span>
    <span class="nx">inside</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">eventType</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

  <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">related</span> <span class="o">!==</span> <span class="k">this</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">related</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">inside</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">related</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">inside</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>

      <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">eventType</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-83">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-83">&#182;</a>               </div>               <p>In case of event delegation, we only need to rename the event.type,
liveHandler will take care of the rest.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">delegate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
<span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-84">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-84">&#182;</a>               </div>               <p>Create mouseenter and mouseleave events</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nx">mouseenter</span><span class="o">:</span> <span class="s2">&quot;mouseover&quot;</span><span class="p">,</span>
  <span class="nx">mouseleave</span><span class="o">:</span> <span class="s2">&quot;mouseout&quot;</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">fix</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">orig</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">fix</span><span class="p">,</span> <span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">selector</span> <span class="o">?</span> <span class="nx">delegate</span> <span class="o">:</span> <span class="nx">withinElement</span><span class="p">,</span> <span class="nx">orig</span> <span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">fix</span><span class="p">,</span> <span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">selector</span> <span class="o">?</span> <span class="nx">delegate</span> <span class="o">:</span> <span class="nx">withinElement</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-85">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-85">&#182;</a>               </div>               <p>submit delegation</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">submitBubbles</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">submit</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">namespaces</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;form&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;click.specialSubmit&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span>
            <span class="nx">type</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;submit&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;image&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;submit&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">});</span>

        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;keypress.specialSubmit&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span>
            <span class="nx">type</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;text&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;password&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">13</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;submit&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">});</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">namespaces</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;.specialSubmit&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-86">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-86">&#182;</a>               </div>               <p>change delegation, happens here so we have bind.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">changeBubbles</span> <span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">changeFilters</span><span class="p">,</span>

  <span class="nx">getVal</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;select-multiple&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">selectedIndex</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">selected</span><span class="p">;</span>
        <span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span> <span class="o">:</span>
        <span class="s2">&quot;&quot;</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;select&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">val</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">testChange</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">testChange</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">val</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">readOnly</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;_change_data&quot;</span> <span class="p">);</span>
    <span class="nx">val</span> <span class="o">=</span> <span class="nx">getVal</span><span class="p">(</span><span class="nx">elem</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-87">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-87">&#182;</a>               </div>               <p>the current data will be also retrieved by beforeactivate</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;focusout&quot;</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;radio&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;_change_data&quot;</span><span class="p">,</span> <span class="nx">val</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">val</span> <span class="o">===</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;change&quot;</span><span class="p">;</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">liveFired</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">change</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">filters</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">focusout</span><span class="o">:</span> <span class="nx">testChange</span><span class="p">,</span>

      <span class="nx">beforedeactivate</span><span class="o">:</span> <span class="nx">testChange</span><span class="p">,</span>

      <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;select&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">testChange</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">e</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-88">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-88">&#182;</a>               </div>               <p>Change has to be called before submit
Keydown will be called before keypress, which is used in submit-event delegation</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">keydown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">13</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;textarea&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span>
          <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">32</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span><span class="p">))</span> <span class="o">||</span>
          <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;select-multiple&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">testChange</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">e</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-89">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-89">&#182;</a>               </div>               <p>Beforeactivate happens also before the previous element is blurred
with this event you can't trigger a change event, but you can store
information</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">beforeactivate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;_change_data&quot;</span><span class="p">,</span> <span class="nx">getVal</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">namespaces</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;file&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">changeFilters</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;.specialChange&quot;</span><span class="p">,</span> <span class="nx">changeFilters</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">namespaces</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;.specialChange&quot;</span> <span class="p">);</span>

      <span class="k">return</span> <span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">changeFilters</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">filters</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-90">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-90">&#182;</a>               </div>               <p>Handle when the input is .focus()'d</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">changeFilters</span><span class="p">.</span><span class="nx">focus</span> <span class="o">=</span> <span class="nx">changeFilters</span><span class="p">.</span><span class="nx">beforeactivate</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">trigger</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-91">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-91">&#182;</a>               </div>               <p>Piggyback on a donor event to simulate a different one.
Fake originalEvent to avoid donor's stopPropagation, but if the
simulated event prevents default then we do the same on the donor.
Don't pass args or remember liveFired; they apply to the donor event.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">args</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">);</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">liveFired</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">event</span> <span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isDefaultPrevented</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">args</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">preventDefault</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-92">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-92">&#182;</a>               </div>               <p>Create "bubbling" focus and blur events</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">focusinBubbles</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span> <span class="nx">focus</span><span class="o">:</span> <span class="s2">&quot;focusin&quot;</span><span class="p">,</span> <span class="nx">blur</span><span class="o">:</span> <span class="s2">&quot;focusout&quot;</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">fix</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-93">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-93">&#182;</a>               </div>               <p>Attach a single capturing handler while someone wants focusin/focusout</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">attaches</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">fix</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">attaches</span><span class="o">++</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">--</span><span class="nx">attaches</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">handler</span><span class="p">(</span> <span class="nx">donor</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-94">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-94">&#182;</a>               </div>               <p>Donor event is always a native one; fix it and switch its type.
Let focusin/out handler cancel the donor focus/blur event.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fix</span><span class="p">(</span> <span class="nx">donor</span> <span class="p">);</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">fix</span><span class="p">;</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">e</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">isDefaultPrevented</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">donor</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span><span class="s2">&quot;bind&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">handler</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-95">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-95">&#182;</a>               </div>               <p>Handle object literals</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">[</span> <span class="nx">name</span> <span class="p">](</span><span class="nx">key</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">type</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">fn</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;one&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">unbind</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">handler</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
      <span class="p">};</span>
      <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;unload&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">name</span> <span class="o">!==</span> <span class="s2">&quot;one&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">unbind</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-96">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-96">&#182;</a>               </div>               <p>Handle object literals</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">type</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">type</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">delegate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">live</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">undelegate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span> <span class="s2">&quot;live&quot;</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">die</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">triggerHandler</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">true</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-97">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-97">&#182;</a>               </div>               <p>Save reference to arguments for access in closure</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">,</span>
      <span class="nx">guid</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">toggler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-98">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-98">&#182;</a>               </div>               <p>Figure out which function to execute</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">lastToggle</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;lastToggle&quot;</span> <span class="o">+</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">%</span> <span class="nx">i</span><span class="p">;</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;lastToggle&quot;</span> <span class="o">+</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span><span class="p">,</span> <span class="nx">lastToggle</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-99">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-99">&#182;</a>               </div>               <p>Make sure that clicks stop</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-100">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-100">&#182;</a>               </div>               <p>and execute the function</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">return</span> <span class="nx">args</span><span class="p">[</span> <span class="nx">lastToggle</span> <span class="p">].</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-101">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-101">&#182;</a>               </div>               <p>link all the functions, so any of them can unbind this click handler</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">toggler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">guid</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">].</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">guid</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span> <span class="nx">toggler</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">hover</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fnOver</span><span class="p">,</span> <span class="nx">fnOut</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">mouseenter</span><span class="p">(</span> <span class="nx">fnOver</span> <span class="p">).</span><span class="nx">mouseleave</span><span class="p">(</span> <span class="nx">fnOut</span> <span class="o">||</span> <span class="nx">fnOver</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">liveMap</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">focus</span><span class="o">:</span> <span class="s2">&quot;focusin&quot;</span><span class="p">,</span>
  <span class="nx">blur</span><span class="o">:</span> <span class="s2">&quot;focusout&quot;</span><span class="p">,</span>
  <span class="nx">mouseenter</span><span class="o">:</span> <span class="s2">&quot;mouseover&quot;</span><span class="p">,</span>
  <span class="nx">mouseleave</span><span class="o">:</span> <span class="s2">&quot;mouseout&quot;</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span><span class="s2">&quot;live&quot;</span><span class="p">,</span> <span class="s2">&quot;die&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">origSelector</span> <span class="cm">/* Internal Use Only */</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">preType</span><span class="p">,</span>
      <span class="nx">selector</span> <span class="o">=</span> <span class="nx">origSelector</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
      <span class="nx">context</span> <span class="o">=</span> <span class="nx">origSelector</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">types</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">types</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">types</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">context</span><span class="p">[</span> <span class="nx">name</span> <span class="p">](</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">types</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">selector</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;die&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">types</span> <span class="o">&amp;&amp;</span>
          <span class="nx">origSelector</span> <span class="o">&amp;&amp;</span> <span class="nx">origSelector</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;.&quot;</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nx">context</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span> <span class="nx">origSelector</span> <span class="p">);</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">||</span> <span class="nx">returnFalse</span><span class="p">;</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">types</span> <span class="o">=</span> <span class="p">(</span><span class="nx">types</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">match</span> <span class="o">=</span> <span class="nx">rnamespaces</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">type</span> <span class="p">);</span>
      <span class="nx">namespaces</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="p">)</span>  <span class="p">{</span>
        <span class="nx">namespaces</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rnamespaces</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;hover&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">types</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="s2">&quot;mouseenter&quot;</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="s2">&quot;mouseleave&quot;</span> <span class="o">+</span> <span class="nx">namespaces</span> <span class="p">);</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">preType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">liveMap</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">types</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">liveMap</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">+</span> <span class="nx">namespaces</span> <span class="p">);</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="p">(</span><span class="nx">liveMap</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">type</span><span class="p">)</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;live&quot;</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-102">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-102">&#182;</a>               </div>               <p>bind live handler</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">context</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="s2">&quot;live.&quot;</span> <span class="o">+</span> <span class="nx">liveConvert</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">),</span>
            <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">selector</span><span class="o">:</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">handler</span><span class="o">:</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">origType</span><span class="o">:</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">origHandler</span><span class="o">:</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">preType</span><span class="o">:</span> <span class="nx">preType</span> <span class="p">}</span> <span class="p">);</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-103">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-103">&#182;</a>               </div>               <p>unbind live handler</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">context</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span> <span class="s2">&quot;live.&quot;</span> <span class="o">+</span> <span class="nx">liveConvert</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">),</span> <span class="nx">fn</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">liveHandler</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">maxLevel</span><span class="p">,</span> <span class="nx">related</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">close</span><span class="p">,</span> <span class="nx">namespace</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span>
    <span class="nx">elems</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">selectors</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">events</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-104">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-104">&#182;</a>               </div>               <p>Make sure we avoid non-left-click bubbling in Firefox (#3861) and disabled elements in IE (#6911)</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">liveFired</span> <span class="o">===</span> <span class="k">this</span> <span class="o">||</span> <span class="o">!</span><span class="nx">events</span> <span class="o">||</span> <span class="o">!</span><span class="nx">events</span><span class="p">.</span><span class="nx">live</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;click&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">namespace</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(^|\\.)&quot;</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\.(?:.*\\.)?&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(\\.|$)&quot;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">event</span><span class="p">.</span><span class="nx">liveFired</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">live</span> <span class="o">=</span> <span class="nx">events</span><span class="p">.</span><span class="nx">live</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">live</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">live</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rnamespaces</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">selectors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">live</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">j</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">match</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="p">).</span><span class="nx">closest</span><span class="p">(</span> <span class="nx">selectors</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="p">);</span>

  <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">close</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">live</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">live</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">close</span><span class="p">.</span><span class="nx">selector</span> <span class="o">===</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">namespace</span> <span class="o">||</span> <span class="nx">namespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">close</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">disabled</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span> <span class="o">=</span> <span class="nx">close</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>
        <span class="nx">related</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-105">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-105">&#182;</a>               </div>               <p>Those two events require additional checking</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">preType</span> <span class="o">===</span> <span class="s2">&quot;mouseenter&quot;</span> <span class="o">||</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">preType</span> <span class="o">===</span> <span class="s2">&quot;mouseleave&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">preType</span><span class="p">;</span>
          <span class="nx">related</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="p">).</span><span class="nx">closest</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">)[</span><span class="mi">0</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-106">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-106">&#182;</a>               </div>               <p>Make sure not to accidentally match a child element with the same selector</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span> <span class="nx">related</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">related</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">related</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">related</span> <span class="o">||</span> <span class="nx">related</span> <span class="o">!==</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elems</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nx">elem</span><span class="o">:</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">handleObj</span><span class="o">:</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="nx">level</span><span class="o">:</span> <span class="nx">close</span><span class="p">.</span><span class="nx">level</span> <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">match</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">maxLevel</span> <span class="o">&amp;&amp;</span> <span class="nx">match</span><span class="p">.</span><span class="nx">level</span> <span class="o">&gt;</span> <span class="nx">maxLevel</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">;</span>

    <span class="nx">ret</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">origHandler</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">match</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isPropagationStopped</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">maxLevel</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">level</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">stop</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isImmediatePropagationStopped</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">stop</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">liveConvert</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">type</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;*&quot;</span> <span class="o">?</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rperiod</span><span class="p">,</span> <span class="s2">&quot;`&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rspaces</span><span class="p">,</span> <span class="s2">&quot;&amp;&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">(</span><span class="s2">&quot;blur focus focusin focusout load resize scroll unload click dblclick &quot;</span> <span class="o">+</span>
  <span class="s2">&quot;mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave &quot;</span> <span class="o">+</span>
  <span class="s2">&quot;change select submit keydown keypress keyup error&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-107">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-107">&#182;</a>               </div>               <p>Handle event binding</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
  <span class="p">};</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrFn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrFn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 