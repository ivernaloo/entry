<!DOCTYPE html>  <html> <head>   <title>10-manipulation.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="01-core.html">                 01-core.js               </a>                                           <a class="source" href="02-deferred.html">                 02-deferred.js               </a>                                           <a class="source" href="03-support.html">                 03-support.js               </a>                                           <a class="source" href="04-data.html">                 04-data.js               </a>                                           <a class="source" href="05-queue.html">                 05-queue.js               </a>                                           <a class="source" href="06-attributes.html">                 06-attributes.js               </a>                                           <a class="source" href="07-event.html">                 07-event.js               </a>                                           <a class="source" href="08-selector.html">                 08-selector.js               </a>                                           <a class="source" href="09-traversing.html">                 09-traversing.js               </a>                                           <a class="source" href="10-manipulation.html">                 10-manipulation.js               </a>                                           <a class="source" href="11-css.html">                 11-css.js               </a>                                           <a class="source" href="12-ajax.html">                 12-ajax.js               </a>                                           <a class="source" href="13-effects.html">                 13-effects.js               </a>                                           <a class="source" href="14-offset.html">                 14-offset.js               </a>                                           <a class="source" href="15-dimensions.html">                 15-dimensions.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               10-manipulation.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><strong>jQuery Annotated Source</strong>.</p>

<p><a href="/jquery-annotated-source/">Home</a> | <a href="09-traversing.html">Previous Chapter</a> | <a href="11-css.html">Next Chapter</a></p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Manipulation</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">rinlinejQuery</span> <span class="o">=</span> <span class="sr">/ jQuery\d+=&quot;(?:\d+|null)&quot;/g</span><span class="p">,</span>
  <span class="nx">rleadingWhitespace</span> <span class="o">=</span> <span class="sr">/^\s+/</span><span class="p">,</span>
  <span class="nx">rxhtmlTag</span> <span class="o">=</span> <span class="sr">/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/ig</span><span class="p">,</span>
  <span class="nx">rtagName</span> <span class="o">=</span> <span class="sr">/&lt;([\w:]+)/</span><span class="p">,</span>
  <span class="nx">rtbody</span> <span class="o">=</span> <span class="sr">/&lt;tbody/i</span><span class="p">,</span>
  <span class="nx">rhtml</span> <span class="o">=</span> <span class="sr">/&lt;|&amp;#?\w+;/</span><span class="p">,</span>
  <span class="nx">rnocache</span> <span class="o">=</span> <span class="sr">/&lt;(?:script|object|embed|option|style)/i</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>checked="checked" or checked</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">rchecked</span> <span class="o">=</span> <span class="sr">/checked\s*(?:[^=]|=\s*.checked.)/i</span><span class="p">,</span>
  <span class="nx">rscriptType</span> <span class="o">=</span> <span class="sr">/\/(java|ecma)script/i</span><span class="p">,</span>
  <span class="nx">rcleanScript</span> <span class="o">=</span> <span class="sr">/^\s*&lt;!(?:\[CDATA\[|\-\-)/</span><span class="p">,</span>
  <span class="nx">wrapMap</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">option</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;select multiple=&#39;multiple&#39;&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/select&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">legend</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;fieldset&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/fieldset&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">thead</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">tr</span><span class="o">:</span> <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/tbody&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">td</span><span class="o">:</span> <span class="p">[</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">col</span><span class="o">:</span> <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;colgroup&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/colgroup&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">area</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;map&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/map&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">_default</span><span class="o">:</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">]</span>
  <span class="p">};</span>

<span class="nx">wrapMap</span><span class="p">.</span><span class="nx">optgroup</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">option</span><span class="p">;</span>
<span class="nx">wrapMap</span><span class="p">.</span><span class="nx">tbody</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">tfoot</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">colgroup</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">caption</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">thead</span><span class="p">;</span>
<span class="nx">wrapMap</span><span class="p">.</span><span class="nx">th</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">td</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>IE can't serialize <code>link</code> and <code>script</code> tags normally</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">htmlSerialize</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">_default</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;div&lt;div&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span> <span class="p">];</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span> <span class="nx">text</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">text</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">text</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span><span class="p">).</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">wrapAll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">html</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>The elements to wrap the target around</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="kd">var</span> <span class="nx">wrap</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">html</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">clone</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">wrap</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">wrap</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">elem</span><span class="p">;</span>
      <span class="p">}).</span><span class="nx">append</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">wrapInner</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">wrapInner</span><span class="p">(</span> <span class="nx">html</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">),</span>
        <span class="nx">contents</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">contents</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">contents</span><span class="p">.</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">wrap</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">unwrap</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">replaceWith</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}).</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="nx">append</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">prepend</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">before</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">set</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">set</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">set</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">toArray</span><span class="p">()</span> <span class="p">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">set</span><span class="p">,</span> <span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">after</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">set</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;after&quot;</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
      <span class="nx">set</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">set</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toArray</span><span class="p">()</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">set</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>keepData is for internal use only--do not document</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">keepData</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">selector</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">]</span> <span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">keepData</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">);</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">empty</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Remove element nodes and prevent memory leaks</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Remove any remaining nodes</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">clone</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dataAndEvents</span> <span class="o">=</span> <span class="nx">dataAndEvents</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="nx">dataAndEvents</span><span class="p">;</span>
    <span class="nx">deepDataAndEvents</span> <span class="o">=</span> <span class="nx">deepDataAndEvents</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">dataAndEvents</span> <span class="o">:</span> <span class="nx">deepDataAndEvents</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">html</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span>
        <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rinlinejQuery</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span>
        <span class="kc">null</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>See if we can take a shortcut and just use innerHTML</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rnocache</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
      <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">leadingWhitespace</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">))</span> <span class="o">&amp;&amp;</span>
      <span class="o">!</span><span class="nx">wrapMap</span><span class="p">[</span> <span class="p">(</span><span class="nx">rtagName</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">])[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rxhtmlTag</span><span class="p">,</span> <span class="s2">&quot;&lt;$1&gt;&lt;/$2&gt;&quot;</span><span class="p">);</span>

      <span class="k">try</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Remove element nodes and prevent memory leaks</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">);</span>
            <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>If using innerHTML throws an exception, use the fallback method</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">())</span> <span class="p">);</span>
      <span class="p">});</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">replaceWith</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Make sure that the elements are removed from the DOM before they are inserted
this can help fix replacing a parent with child elements</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">old</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">();</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">replaceWith</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">old</span> <span class="p">)</span> <span class="p">);</span>
        <span class="p">});</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">value</span> <span class="p">).</span><span class="nx">detach</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">next</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">,</span>
          <span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>

        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">remove</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">next</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">(</span><span class="nx">next</span><span class="p">).</span><span class="nx">before</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">(</span><span class="nx">parent</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">?</span> <span class="nx">value</span><span class="p">()</span> <span class="o">:</span> <span class="nx">value</span><span class="p">),</span> <span class="s2">&quot;replaceWith&quot;</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">:</span>
        <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">detach</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">domManip</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">parent</span><span class="p">,</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
      <span class="nx">scripts</span> <span class="o">=</span> <span class="p">[];</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>We can't cloneNode fragments that contain checked, in WebKit</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">checkClone</span> <span class="o">&amp;&amp;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">rchecked</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">table</span> <span class="o">?</span> <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">);</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">parent</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>If we're in a fragment, just use that instead of building a new one</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">results</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">fragment</span><span class="o">:</span> <span class="nx">parent</span> <span class="p">};</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">results</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">buildFragment</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">fragment</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">fragment</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">first</span> <span class="o">=</span> <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">first</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">first</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">table</span> <span class="o">=</span> <span class="nx">table</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">first</span><span class="p">,</span> <span class="s2">&quot;tr&quot;</span> <span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">lastIndex</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span>
            <span class="nx">table</span> <span class="o">?</span>
              <span class="nx">root</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">first</span><span class="p">)</span> <span class="o">:</span>
              <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Make sure that we do not leak memory by inadvertently discarding
the original fragment (which might have attached data) instead of
using it; in addition, use the original fragment object for the last
item instead of first because it can end up being emptied incorrectly
in certain situations (Bug #8070).
Fragments from the fragment cache must always be cloned and never used
in place.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">results</span><span class="p">.</span><span class="nx">cacheable</span> <span class="o">||</span> <span class="p">(</span><span class="nx">l</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lastIndex</span><span class="p">)</span> <span class="o">?</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span> <span class="nx">fragment</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="o">:</span>
              <span class="nx">fragment</span>
          <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">scripts</span><span class="p">,</span> <span class="nx">evalScript</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">root</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span><span class="p">)</span> <span class="o">?</span>
    <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;tbody&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;tbody&quot;</span><span class="p">)))</span> <span class="o">:</span>
    <span class="nx">elem</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">dest</span> <span class="p">)</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">hasData</span><span class="p">(</span> <span class="nx">src</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">internalKey</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span>
    <span class="nx">oldData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">src</span> <span class="p">),</span>
    <span class="nx">curData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">oldData</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Switch to use the internal data object, if it exists, for the next
stage of data copying</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">oldData</span> <span class="o">=</span> <span class="nx">oldData</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="nx">oldData</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span>
        <span class="nx">curData</span> <span class="o">=</span> <span class="nx">curData</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">oldData</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="nx">curData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>
      <span class="nx">curData</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="p">{};</span>

      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">namespace</span> <span class="o">?</span> <span class="s2">&quot;.&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">namespace</span><span class="p">,</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">data</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">cloneFixAttributes</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">dest</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">nodeName</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>We do not need to do anything for non-Elements</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>clearAttributes removes the attributes, which we don't want,
but also removes the attachEvent events, which we <em>do</em> want</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">clearAttributes</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">clearAttributes</span><span class="p">();</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>mergeAttributes, in contrast, only merges back on the
original attributes, not the events</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">mergeAttributes</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">mergeAttributes</span><span class="p">(</span> <span class="nx">src</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">nodeName</span> <span class="o">=</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>IE6-8 fail to clone children inside object elements that use
the proprietary classid attribute value (rather than the type
attribute) to identify the type of content to display</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">outerHTML</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">outerHTML</span><span class="p">;</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">src</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="nx">src</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>IE6-8 fails to persist the checked state of a cloned checkbox
or radio button. Worse, IE6-7 fail to give the cloned element
a checked appearance if the defaultChecked value isn't also set</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">src</span><span class="p">.</span><span class="nx">checked</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">dest</span><span class="p">.</span><span class="nx">defaultChecked</span> <span class="o">=</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>IE6-7 get confused and end up setting the value of a cloned
checkbox/radio button to an empty string instead of "on"</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">value</span> <span class="o">!==</span> <span class="nx">src</span><span class="p">.</span><span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">dest</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>IE6-8 fails to return the selected option to the default selected
state when cloning options</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;option&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">defaultSelected</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>IE6-8 fails to set the defaultValue to the correct value when
cloning other types of input fields</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">||</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;textarea&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">defaultValue</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">;</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Event data gets referenced instead of copied if the expando
gets copied too</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">dest</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">);</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">buildFragment</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">nodes</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">cacheable</span><span class="p">,</span> <span class="nx">cacheresults</span><span class="p">,</span> <span class="nx">doc</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>nodes may contain either an explicit document object,
a jQuery collection or context object.
If nodes[0] contains a valid object to assign to doc</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="nx">nodes</span> <span class="o">&amp;&amp;</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">doc</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Ensure that an attr object doesn't incorrectly stand in as a document object
Chrome and Firefox seem to allow this to occur and will throw exception
Fixes #8950</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">doc</span><span class="p">.</span><span class="nx">createDocumentFragment</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">doc</span> <span class="o">=</span> <span class="nb">document</span><span class="p">;</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Only cache "small" (1/2 KB) HTML strings that are associated with the main document
Cloning options loses the selected state, so don't cache them
IE 6 doesn't like it when you put <object> or <embed> elements in a fragment
Also, WebKit does not clone 'checked' attributes on cloneNode, so don't cache</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">512</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span> <span class="o">===</span> <span class="nb">document</span> <span class="o">&amp;&amp;</span>
    <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rnocache</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">checkClone</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rchecked</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">cacheable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="nx">cacheresults</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fragments</span><span class="p">[</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">cacheresults</span> <span class="o">&amp;&amp;</span> <span class="nx">cacheresults</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">cacheresults</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">fragment</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clean</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">cacheable</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fragments</span><span class="p">[</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">cacheresults</span> <span class="o">?</span> <span class="nx">fragment</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span> <span class="nx">fragment</span><span class="o">:</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">cacheable</span><span class="o">:</span> <span class="nx">cacheable</span> <span class="p">};</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fragments</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nx">appendTo</span><span class="o">:</span> <span class="s2">&quot;append&quot;</span><span class="p">,</span>
  <span class="nx">prependTo</span><span class="o">:</span> <span class="s2">&quot;prepend&quot;</span><span class="p">,</span>
  <span class="nx">insertBefore</span><span class="o">:</span> <span class="s2">&quot;before&quot;</span><span class="p">,</span>
  <span class="nx">insertAfter</span><span class="o">:</span> <span class="s2">&quot;after&quot;</span><span class="p">,</span>
  <span class="nx">replaceAll</span><span class="o">:</span> <span class="s2">&quot;replaceWith&quot;</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">original</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">insert</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">),</span>
      <span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">insert</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">insert</span><span class="p">[</span> <span class="nx">original</span> <span class="p">](</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">insert</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elems</span> <span class="o">=</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">).</span><span class="nx">get</span><span class="p">();</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">insert</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)[</span> <span class="nx">original</span> <span class="p">](</span> <span class="nx">elems</span> <span class="p">);</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">insert</span><span class="p">.</span><span class="nx">selector</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;getElementsByTagName&quot;</span> <span class="k">in</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;*&quot;</span> <span class="p">);</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;querySelectorAll&quot;</span> <span class="k">in</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span> <span class="s2">&quot;*&quot;</span> <span class="p">);</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
  <span class="p">}</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Used in clean, fixes the defaultChecked property</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">fixDefaultChecked</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">defaultChecked</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Finds all inputs and passes them to fixDefaultChecked</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">findInputs</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">fixDefaultChecked</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;getElementsByTagName&quot;</span> <span class="k">in</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">),</span> <span class="nx">fixDefaultChecked</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">clone</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">clone</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">),</span>
        <span class="nx">srcElements</span><span class="p">,</span>
        <span class="nx">destElements</span><span class="p">,</span>
        <span class="nx">i</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">noCloneEvent</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">noCloneChecked</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>IE copies events bound via attachEvent when using cloneNode.
Calling detachEvent on the clone will also remove the events
from the original. In order to get around this, we use some
proprietary methods to clear the events. Thanks to MooTools
guys for this hotness.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">cloneFixAttributes</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">clone</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Using Sizzle here is crazy slow, so we use getElementsByTagName
instead</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">srcElements</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="nx">destElements</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">clone</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Weird iteration because IE will replace the length property
with an element if you are cloning the body and one of the
elements on the page has a name or id of "length"</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="o">++</span><span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">cloneFixAttributes</span><span class="p">(</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">destElements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Copy the events from the original to the clone</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="nx">dataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">clone</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">srcElements</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="nx">destElements</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">clone</span> <span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="o">++</span><span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">destElements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">srcElements</span> <span class="o">=</span> <span class="nx">destElements</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Return the cloned set</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">return</span> <span class="nx">clone</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">clean</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">checkScriptType</span><span class="p">;</span>

    <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>!context.createElement fails in IE with an error but returns typeof 'object'</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createElement</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">context</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">j</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Convert html string into DOM nodes</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">rhtml</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Fix "XHTML"-style tags in all browsers</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rxhtmlTag</span><span class="p">,</span> <span class="s2">&quot;&lt;$1&gt;&lt;/$2&gt;&quot;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Trim whitespace, otherwise indexOf won't work as expected</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="kd">var</span> <span class="nx">tag</span> <span class="o">=</span> <span class="p">(</span><span class="nx">rtagName</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">])[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">(),</span>
            <span class="nx">wrap</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">[</span> <span class="nx">tag</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">_default</span><span class="p">,</span>
            <span class="nx">depth</span> <span class="o">=</span> <span class="nx">wrap</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">div</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Go to html and back, then peel off extra wrappers</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">wrap</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">elem</span> <span class="o">+</span> <span class="nx">wrap</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Move to the right depth</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">while</span> <span class="p">(</span> <span class="nx">depth</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">div</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">;</span>
          <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Remove IE's autoinserted <code>tbody</code> from table fragments</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">tbody</span> <span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>String was a <code>table</code>, <em>may</em> have spurious <code>tbody</code></p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">hasBody</span> <span class="o">=</span> <span class="nx">rtbody</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">elem</span><span class="p">),</span>
              <span class="nx">tbody</span> <span class="o">=</span> <span class="nx">tag</span> <span class="o">===</span> <span class="s2">&quot;table&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">hasBody</span> <span class="o">?</span>
                <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">&amp;&amp;</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">childNodes</span> <span class="o">:</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>String was a bare <code>thead</code> or <code>tfoot</code></p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">wrap</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;&lt;table&gt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">hasBody</span> <span class="o">?</span>
                  <span class="nx">div</span><span class="p">.</span><span class="nx">childNodes</span> <span class="o">:</span>
                  <span class="p">[];</span>

            <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">tbody</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">;</span> <span class="o">--</span><span class="nx">j</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">],</span> <span class="s2">&quot;tbody&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">].</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">].</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">]</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>IE completely kills leading whitespace when innerHTML is used</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">leadingWhitespace</span> <span class="o">&amp;&amp;</span> <span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">div</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">elem</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="p">),</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
          <span class="p">}</span>

          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Resets defaultChecked for any radios and checkboxes
about to be appended to the DOM in IE 6/7 (#8060)</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="kd">var</span> <span class="nx">len</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">appendChecked</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="p">(</span><span class="nx">len</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">findInputs</span><span class="p">(</span> <span class="nx">elem</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">findInputs</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">fragment</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">checkScriptType</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">rscriptType</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="p">);</span>
      <span class="p">};</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">scripts</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="s2">&quot;script&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;text/javascript&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">scripts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">parentNode</span> <span class="o">?</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">jsTags</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;script&quot;</span> <span class="p">),</span> <span class="nx">checkScriptType</span> <span class="p">);</span>

            <span class="nx">ret</span><span class="p">.</span><span class="nx">splice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">jsTags</span> <span class="p">)</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">fragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">cleanData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">cache</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span><span class="p">,</span> <span class="nx">internalKey</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span> <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">,</span>
      <span class="nx">deleteExpando</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noData</span><span class="p">[</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">id</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">id</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">][</span> <span class="nx">internalKey</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">data</span><span class="p">.</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>This is a shortcut to avoid jQuery.event.remove's overhead</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">handle</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Null the DOM reference to avoid IE6/7/8 leak (#7054)</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">elem</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">deleteExpando</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">delete</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">];</span>

        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">evalScript</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">src</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nx">url</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">src</span><span class="p">,</span>
      <span class="nx">async</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">dataType</span><span class="o">:</span> <span class="s2">&quot;script&quot;</span>
    <span class="p">});</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">globalEval</span><span class="p">(</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">text</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rcleanScript</span><span class="p">,</span> <span class="s2">&quot;/*$0*/&quot;</span> <span class="p">)</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 